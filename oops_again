import random
import string
import re

class Bank_account:
    def __init__(self, account_number, account_holder, balance=0):
        self.__account_number = account_number
        self.__account_holder = account_holder
        self.__balance = balance

    def deposit(self, amount):
        if amount > 0:
            self.__balance += amount
            print(f"Amount deposited is {amount} \n Updated balance is {self.__balance}")
        else:
            print("Invalid amount entered")  # Removed unnecessary parentheses here

    def withdraw(self, amount):
        if amount > 0 and amount < self.__balance:
            self.__balance -= amount
            print(f"Amount withdrawn is {amount} \n Updated balance is {self.__balance}")
        else:
            print("Invalid amount entered")  # Removed unnecessary parentheses here

    def get_balance(self):
        return self.__balance

    def account_info(self):
        print(f"Account holder : {self.__account_holder}")
        print(f"Account number : {self.__account_number}")

def generate_account_number():
    while True:
        letters = ''.join(random.choices(string.ascii_uppercase, k=4))
        digits = ''.join(random.choices(string.digits, k=6))
        acc_no = letters + digits
        if re.fullmatch(r'[A-Z]{4}\d{6}', acc_no):
            return acc_no

def create_account():
    print("Welcome to the Best bank")
    name = input("Enter your name: ")  # Added colon and space for clarity
    acc_no = generate_account_number()
    initial_balance = int(input("Enter initial deposit amount: "))  # Added colon and space for clarity

    account = Bank_account(acc_no, name, initial_balance)
    print("Account created successfully")
    account.account_info()  # Removed print() because account_info() already prints

    return account

print("Welcome to Mallya bank, how can we help you today")

print("Our services\n ---------------")

account = None  # Added variable to store the user account (originally missing)

service = 0

while service != 6:
    print("1. Open new Account")
    print("2. Get account info")
    print("3. Deposit")
    print("4. Withdraw")  # Fixed typo from "Wtihdraw"
    print("5. Get balance")
    print("6. Exit")  # Added number for exit (originally just "Exit")
    print("\n---------------")
    try:
        service = int(input("Choose a service: "))
    except ValueError:
        print("Please enter a valid number")
        continue

    if service == 1:
        account = create_account()  # Store the account for later use
    elif service == 2:
        if account:
            account.account_info()  # Call on instance, not class
        else:
            print("Please open an account first.")
    elif service == 3:
        if account:
            amount = float(input("Enter amount to deposit: "))
            account.deposit(amount)  # Called on instance, fixed method name (was Deposit)
        else:
            print("Please open an account first.")
    elif service == 4:
        if account:
            amount = float(input("Enter amount to withdraw: "))
            account.withdraw(amount)  # Called on instance (was Bank_account.withdraw())
        else:
            print("Please open an account first.")
    elif service == 5:
        if account:
            print(f"Current balance: {account.get_balance()}")  # Called on instance (was Bank_account.get_balance())
        else:
            print("Please open an account first.")
    elif service == 6:
        print("Thank you for using our services, We hope to see you back soon")
        break
    else:
        print("Invalid option. Please select a valid service.")
